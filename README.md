# GoWebHooks

> ä¸€ä¸ªé€šè¿‡é…ç½® yaml æ–‡ä»¶çš„ webhooks éƒ¨ç½²è„šæœ¬
>
> æ”¯æŒ Githubã€Giteeã€Coding
>
> å¹¶ä¸”æä¾›äº†é‚®ä»¶æé†’åŠŸèƒ½

## ä»€ä¹ˆæ˜¯ webhooks?

> ä½œä¸ºä¸€åè¿ç»´çš„åŒå­¦, å‰ç«¯æƒ³ä½ æäº†ä¸€ä¸ªéœ€æ±‚:â€œ æˆ‘æƒ³æ¯æ¬¡ push åˆ°äº‘ç«¯éƒ½å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šå®æ—¶é¢„è§ˆ! â€

ä½ æƒ³äº†åŠå¤©æƒ³å‡ºäº†ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ

> æœåŠ¡å™¨ä¸Šä½¿ç”¨ cron æ¯ 10s è‡ªåŠ¨æ‰§è¡Œ git pull

ä½ å¼€å¼€å¿ƒå¿ƒçš„å»æ‘¸é±¼äº†~

> ç¬¬äºŒå¤©, å‰ç«¯çš„åŒå­¦å¼€å§‹ä½¿ç”¨ Vue, æäº†ä¸€ä¸ªæ–°è¦æ±‚:â€œ å¯ä¸å¯ä»¥æ¯æ¬¡ä¸Šä¼ ä»£ç ååœ¨æœåŠ¡å™¨æ„å»º, è€Œä¸æ˜¯æœ¬åœ°æ„å»ºå®Œä¸Šä¼ åˆ°è¿œç«¯? â€

è¿™æ¬¡ä¹‹å‰çš„æ–¹å¼è¡Œä¸é€šäº†, æ¯åç§’é‡æ–°æ„å»ºä¸€æ¬¡, å°çš„é¡¹ç›®è¿˜å¥½, å¤§çš„é¡¹ç›® 10s å¯æ„å»ºä¸å®Œ

ä½ ç™¾åº¦äº†ä¸€ç•ª, å‘ç°å„å¤§ Git å¹³å°éƒ½æä¾›äº† WebHooks

> æ¯æ¬¡å‘ä»“åº“ push æ—¶, éƒ½ä¼šå‘é…ç½®å¥½çš„ç½‘å€å‘é€ http è¯·æ±‚, è¿™æ ·æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚å, å°±å¯ä»¥ pull ä»£ç , å¹¶æ‰§è¡Œ shell è„šæœ¬å•¦~

ä½ è¯»äº†æœ¬é¡¹ç›®çš„`README.md`, ä½¿ç”¨æœ¬é¡¹ç›®å®Œæˆäº†å‰ç«¯çš„éœ€æ±‚!

> ä¸ºäº†é˜²æ­¢éƒ¨ç½²å¤±è´¥è€Œå½“äº‹äººä¸ä¹‹æƒ…ï¼Œäºæ˜¯å¢åŠ äº†é‚®ä»¶æé†’åŠŸèƒ½ï¼

> è¯¦è§`example`æ–‡ä»¶å¤¹

## ä½¿ç”¨

### é…ç½®æŒ‡å—

> coding è¯·å°† `Secret` é…ç½®åœ¨ `ç­¾åä»¤ç‰Œ` ä¸­
>
> Gitee è¯·å°† `Secret` é…ç½®åœ¨ `WebHook å¯†ç ` ä¸­

### æ–‡ä»¶è¯´æ˜

```bash
webhooks/
â”œâ”€â”€ config # yaml é…ç½®æ–‡ä»¶çš„ä½ç½®
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ log # æ—¥å¿—é»˜è®¤ä¿å­˜ä½ç½®
â”‚   â”œâ”€â”€ error.log
â”‚   â””â”€â”€ success.log
â”œâ”€â”€ shell # shell è„šæœ¬é»˜è®¤ä¿å­˜ä½ç½®
â”‚   â””â”€â”€ static.sh # é™æ€æ–‡ä»¶ç¤ºä¾‹ shell è„šæœ¬
â”‚   â””â”€â”€ vue.sh # vue æ‰“åŒ…ç¤ºä¾‹ shell è„šæœ¬
â””â”€â”€ webhooks
```

### æ­å»º

```bash
# 1. ä¸‹è½½ relase ä¸­çš„æ–‡ä»¶
cd /opt
# ä¸‹è½½ Releases
wget https://github.com/fzf404/GoWebHooks/releases/download/v2.4/webhooks.tar.gz
# å›½å†…åŠ é€Ÿä¸‹è½½
wget https://hub.fastgit.xyz/fzf404/GoWebHooks/releases/download/v2.4/webhooks.tar.gz

# 2. è§£å‹
tar -zxvf webhooks.tar.gz
mv example webhooks

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶
cd webhooks
# hooks é…ç½®æ–‡ä»¶
vim config/config.yaml # é…ç½®æ–‡ä»¶ä¸­çš„è¯´æ˜å¾ˆè¯¦ç»†
# éœ€è¦æ‰§è¡Œçš„ shell è„šæœ¬
vim shell/test.sh
# éšä¾¿å†™ç‚¹ä»€ä¹ˆ
#!/bin/bash
echo "hello"

# 4. è¿è¡Œ
chmod +x ./webhooks
./webhooks
# å¦‚ä¸‹è¾“å‡ºåˆ™ä¸ºè¿è¡ŒæˆåŠŸ
2022/03/26 14:56:28 ğŸš¨ Create Log File Success
2021/12/12 21:31:16 ğŸ†• demo: Init Success.
2021/12/12 21:31:16 ğŸ†• test: Init Success.
```

### è‡ªè¡Œç¼–è¯‘

```bash
# cloneæºç 
git clone https://github.com/fzf404/GoWebHooks
# è¿è¡Œ
go run main.go
# ç¼–è¯‘
make.sh
```
